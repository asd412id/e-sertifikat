# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=e_sertifikat
DB_USER=postgres
DB_PASSWORD=password
ORIGINS='http://localhost:5173|http://127.0.0.1:5173|http://localhost:5174|http://localhost:5175'

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# Server Configuration
PORT=8000
NODE_ENV=development

# Frontend URL (for SSO callback redirects)
FRONTEND_URL=http://localhost:5173

# Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_DIR=./uploads

# Asset Library Auto Backfill
AUTO_ASSET_BACKFILL_ON_STARTUP=true
# Delay (ms) before background backfill kicks in after server starts
AUTO_ASSET_BACKFILL_STARTUP_DELAY_MS=1000
# Delay (ms) between each user backfill to avoid heavy I/O bursts
AUTO_ASSET_BACKFILL_USER_DELAY_MS=100

# Certificate Generation Configuration
CERTIFICATE_CONCURRENCY_LIMIT=5

# Certificate Verification (QR)
# Used to sign verification URLs embedded into QR codes.
# Change this in production.
CERT_VERIFY_SECRET=change-this-verify-secret

# Base URL embedded into QR codes (should be publicly reachable).
# Example: https://your-domain.com
CERT_VERIFY_BASE_URL=http://localhost:8000

# ===========================================
# SSO SIMPATIK Configuration
# ===========================================
# Enable/disable SSO SIMPATIK integration
SSO_SIMPATIK_ENABLED=false
SSO_SIMPATIK_CLIENT_ID=your-client-id
SSO_SIMPATIK_CLIENT_SECRET=your-client-secret
SSO_SIMPATIK_BASE_URL=https://app.maccaqe.id
SSO_SIMPATIK_REDIRECT_URI=http://localhost:8000/api/auth/sso/callback
SSO_SIMPATIK_SCOPES=openid profile email
# Optional: Override default endpoint paths (defaults are for AMDPT SSO API v2.1.0)
# SSO_SIMPATIK_AUTHORIZE_PATH=/api/v1/sso/authorize
# SSO_SIMPATIK_TOKEN_PATH=/api/v1/sso/token
# SSO_SIMPATIK_USERINFO_PATH=/api/v1/sso/userinfo

# ===========================================
# SSO Google Configuration
# ===========================================
# Create credentials at: https://console.cloud.google.com/apis/credentials
SSO_GOOGLE_ENABLED=false
SSO_GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
SSO_GOOGLE_CLIENT_SECRET=your-google-client-secret
SSO_GOOGLE_REDIRECT_URI=http://localhost:8000/api/auth/sso/callback

# ===========================================
# SSO Microsoft Configuration
# ===========================================
# Create app at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
SSO_MICROSOFT_ENABLED=false
SSO_MICROSOFT_CLIENT_ID=your-microsoft-client-id
SSO_MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
SSO_MICROSOFT_REDIRECT_URI=http://localhost:8000/api/auth/sso/callback
# Tenant: 'common' for multi-tenant, or specific tenant ID
SSO_MICROSOFT_TENANT=common

# ===========================================
# SSO GitHub Configuration
# ===========================================
# Create OAuth App at: https://github.com/settings/developers
SSO_GITHUB_ENABLED=false
SSO_GITHUB_CLIENT_ID=your-github-client-id
SSO_GITHUB_CLIENT_SECRET=your-github-client-secret
SSO_GITHUB_REDIRECT_URI=http://localhost:8000/api/auth/sso/callback

# ===========================================
# SSO General Settings
# ===========================================
SSO_AUTO_LINK_BY_EMAIL=true

# Puppeteer (PDF) Configuration
# Persist Chromium profile + disk cache across runs (improves performance for bulk generation)
# Default used by code: backend/.puppeteer_profile
PUPPETEER_USER_DATA_DIR=

# Optional alias for CERTIFICATE_CONCURRENCY_LIMIT (if set, this one takes precedence)
PUPPETEER_PDF_CONCURRENCY=

# In-memory cache for intercepted assets (/api/uploads & /api/fonts) to reduce disk reads
# Default TTL: 1 hour
PUPPETEER_ASSET_CACHE_TTL_MS=3600000

# Max cached items (roughly: number of distinct files cached)
PUPPETEER_ASSET_CACHE_MAX_ITEMS=1000

# PDF Metadata (Branding)
# These fields are written into the generated PDF so viewers don't show Chromium defaults
PDF_APP_NAME=e-Sertifikat
PDF_AUTHOR=
PDF_CREATOR=
PDF_PRODUCER=
PDF_SUBJECT=Sertifikat
PDF_KEYWORDS=sertifikat, certificate, e-sertifikat
